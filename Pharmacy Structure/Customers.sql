USE Pharmacy 
go

CREATE TABLE Customers (
	Customer_id int IDENTITY(1,1) PRIMARY KEY,
	FirstName nvarchar(1020)  NOT NULL,
	SecondName nvarchar(1020)  NOT NULL,
	PhoneNumber nvarchar(20)  NULL,
	Age tinyint NOT NULL CHECK(Age >12)
)
go


CREATE OR ALTER 
TRIGGER TCustomerPhoneValidator
	ON Customers
	FOR INSERT, UPDATE

AS
SET NOCOUNT ON
 IF EXISTS(SELECT PhoneNumber
				 FROM Customers
				 WHERE PhoneNumber IS NOT NULL
				 GROUP BY PhoneNumber
				 HAVING COUNT(*)>1)
	ROLLBACK
go




INSERT INTO Customers(FirstName,SecondName,PhoneNumber,Age)
Values  (N'Jakub', N'Nowak', '+48 121222333', 25),
(N'???????', N'Al-Masri', '+966 555646777', 32),
(N'???', N'??', '+81 888999300', 42),
(N'??', N'?', NULL, 37),
(N'???', N'Sharma', '+91 777888199', 29),
(N'??????', N'Ivanov', '+359 666770888', 31),
(N'???', N'Cohen', '+972 222333440', 28),
(N'Jan', N'Kowalski', '+48 444555696', 35),
(N'????', N'Ahmed', '+966 777088999', 45),
(N'??', N'Yamada', '+81 111022333', 26),
(N'??', N'Park', '+82 595666777', 39),
(N'???', N'Mishra', '+91 388999000', 33),
(N'?????', N'Petrova', '+359 577888999', 41),
(N'???', N'Levi', NULL, 36),
(N'Filip', N'Nowicki', '+48 123756789', 30),
(N'???', N'Khan', '+966 444553666', 27),
(N'??', N'Sato', '+81 777881999', 38),
(N'??', N'Kim', '+82 444559666', 34),
(N'????', N'Jain', '+91 111227333', 31),
(N'????', N'Petrov', '+359 559666777', 46),
(N'????', N'Cohen', '+972 888199000', 29),
(N'Oliwia', N'Wiúniewska', '+48 707888999', 42),
(N'?????????', N'Al-Saeed', '+966 110222333', 25),
(N'???', N'Ito', '+81 222353444', 35),
(N'??', N'Lee', '+82 555664777', 26),
(N'??????', N'Patel', '+91 777988999', 31),
(N'???????', N'Ivanov', '+359 656777888', 39),
(N'??????', N'Levy', '+972 222337444', 33),
(N'Hanna', N'Mazur', '+48 444535666', 28),
(N'???', N'??', '+81 111252333', 29),
(N'??', N'Kim', '+82 555666797', 44),
(N'????', N'Sharma', '+91 777808999', 37),
(N'???????', N'Dimitrova', '+359 066777888', 32),
(N'????', N'Cohen', NULL, 36),
(N'Antoni', N'Kowalczyk', '+48 121456789', 31),
(N'??', N'??', '+81 777888999', 42),
(N'??', N'Lee', '+82 444555667', 25),
(N'??????', N'Patel', '+91 777882999', 39),
(N'???????', N'Ivanov', '+359 525666777', 33),
(N'??', N'Cohen', '+972 222333424', 28),
(N'Maja', N'Kowalska', '+48 555266777', 45),
(N'??', N'??', '+81 222333094', 44),
(N'??', N'Kim', '+82 555664277', 37),
(N'????', N'Sharma', '+91 771888911', 32),
(N'?????????', N'Dimitrova', '+359 660777988', 27),
(N'?????', N'Cohen', '+972 222333144', 42),
(N'Amelia', N'Woüniak', '+48 555606707', 25),
(N'???', N'??', '+81 222333644', 29),
(N'??', N'Kim', '+82 555666757', 44),
(N'?????', N'Patel', '+91 777887999', 37),
(N'?????', N'Ivanov', '+359 555966777', 32),
(N'???', N'Cohen', '+972 222331444', 27),
(N'Julia', N'Jankowska', '+48 550666777', 42),
(N'??', N'?', '+82 555666277', 45),
(N'????', N'????', '+91 777828999', 29),
(N'?????', N'Dimitrova', '+359 555166777', 44),
(N'????', N'Cohen', '+972 222331144', 37),
(N'Laura', N'Mazurek', '+48 555116777', 32),
(N'??', N'?', '+82 555666117', 42),
(N'???', N'????', '+91 777111999', 25),
(N'??????', N'Ivanov', '+359 000666777', 45),
(N'???', N'Cohen', '+972 222331114', 29),
(N'Hanna', N'Kowalczyk', '+48 333666777', 44),
(N'??', N'?', '+82 555456777', 32),
(N'??????', N'????', '+91 777238999', 27),
(N'?????', N'Dimitrova', '+359 555986777', 42),
(N'?????', N'Cohen', '+972 222339844', 25),
(N'Miko≥aj', N'Woüniak', '+48 553366777', 45),
(N'??', N'??', '+81 777883699', 44),
(N'??', N'Kim', '+82 555666947', 37),
(N'??????', N'Sharma', '+91 779488999', 32),
(N'??????', N'Ivanov', '+359 555662277', 27),
(N'????', N'Cohen', '+972 222331744', 42),
(N'Zuzanna', N'Jankowska', '+48 557766777', 25),
(N'???', N'??', '+81 777884199', 29),
(N'??', N'Kim', '+82 555667277', 44),
(N'?????', N'Patel', '+91 777885699', 37),
(N'??????', N'Ivanov', '+359 514566777', 32),
(N'?????', N'Cohen', '+972 222897444', 27),
(N'Igor', N'Kowalski', '+48 555236777', 42),
(N'???', N'??', '+81 777159999', 45),
(N'??', N'Kim', '+82 555667777', 29),
(N'?????', N'Sharma', '+91 776708999', 44),
(N'?????', N'Ivanov', '+359 555000777', 37),
(N'????', N'Levi', '+972 222333000', 32),
(N'Aleksandra', N'Nowak', '+48 555000777', 27),
(N'??', N'??', '+81 777666999', 25),
(N'??', N'Kim', '+82 55551277', 45),
(N'?????', N'Sharma', '+91 444888999', 29),
(N'????????', N'Ivanova', '+359 597866777', 44),
(N'???', N'Cohen', '+972 222333234', 37),
(N'Micha≥', N'Kowalczyk', '+48 511166777', 32),
(N'??', N'?', '+82 555662000', 42),
(N'????', N'Sharma', '+91 777300099', 25),
(N'??????????', N'Ivanov', '+359 555156277', 45),
(N'????', N'Cohen', '+972 222631024', 29),
(N'Laura', N'Nowicka', '+48 555950317', 44),
(N'??', N'?', '+82 552456777', 32),
(N'??????', N'????', '+91 774321999', 27),
(N'?????', N'Dimitrova', '+359 550907777', 42);